<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.10.xsd">
    <changeSet author="hasan.eroglu" id="dh-service-1-2022-12-24 15:00" context="sql">
        <sql splitStatements="true">
            create table if not exists dh_country
            (
                id bigint not null generated by default as identity (start with 1) constraint pk_country  primary key,
                name varchar(150),
                phone_code varchar(20),
                code varchar(20)
                );

            comment on column dh_country.name is 'ülkenin adı';
            comment on column dh_country.phone_code is 'ülkenin telefon kodu';
            comment on column dh_country.code is 'ülkenin kodu';
            insert into dh_country (id, name, phone_code, code) values (1, 'Türkiye', '+90', 'TR');
            insert into dh_country (id, name, phone_code, code) values (2, 'Almanya', '+49', 'GE');

            CREATE TABLE if not exists dh_province (
                    id bigint not null generated by default as identity (start with 1) constraint pk_province  primary key,
                    name varchar(150),
                    country_id bigint NOT NULL,
                    phone_code varchar(20),
                    code varchar(20)
            );

        ALTER TABLE dh_province ADD CONSTRAINT fk_province_country_id FOREIGN KEY (country_id) REFERENCES dh_country(id);

        comment on column dh_province.name is 'il adı';
        comment on column dh_province.phone_code is 'il telefon kodu';
        comment on column dh_province.country_id is 'il ülke id';
        comment on column dh_province.code is 'il kodu';
        INSERT INTO dh_province (id, name, country_id, phone_code,code) VALUES(1, 'Ankara',1,'0312','');
        INSERT INTO dh_province (id, name, country_id, phone_code,code) VALUES(2, 'Hatay',1,'0326','');

        </sql>
    </changeSet>


</databaseChangeLog>